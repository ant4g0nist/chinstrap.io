---
title: Chinstrap - Tezos smart contract development
description: How to create, test and deploy Tezos smart contracts?
slug: chinstrap-tezos-smart-contract-development
authors:
  - name: ant4g0nist
    title: Creator of Chinstrap
    url: https://github.com/ant4g0nist
    image_url: https://pbs.twimg.com/profile_images/1536453566566748161/RTjM3OCI_400x400.jpg
tags: [chinstrap, tezos, smart-contracts]
image: https://chinstrap.io/img/logo.png
hide_table_of_contents: false
---


## Chinstrap - Tezos smart contract development

In this blog, we will see how to create, test and deploy Tezos smart contracts using Chinstrap. 
Let's try to build a simple FA1.2 smart contract in SmartPy that has following functionalities:

* mint: allows administrators to mint new tokens
* burn: allows administrators to burn tokens
* pause/unpause: allows administrators to pause or unpause the contract

Lets start by installing Chinstrap. I will use a macOS for this tutorial.

### Install Chinstrap

Install dependecies on macOS:
```sh
brew tap cuber/homebrew-libsecp256k1
brew install libsodium libsecp256k1 gmp
```

and on Ubuntu, Debian and other apt-based distributions:
```sh
apt install libsodium-dev libsecp256k1-dev libgmp-dev pkg-config
```

To install Chinstrap:
```sh
pip3 install -U chinstrap
```


#### M1 (ARM)
In case `secp256k1` or `gmp` cannot find either include or lib paths, try explicitly set environment vars:

```
export CFLAGS="-I`brew --prefix gmp`/include -I`brew --prefix libsecp256k1`/include"
export LDFLAGS="-L`brew --prefix gmp`/lib -L`brew --prefix libsecp256k1`/lib"
pip3 install . -U 
```

### Install the compilers 
After isntalling Chinstrap, we have to install the `ligo`/`SmartPy` compilers. 

```sh
chinstrap install
```

![chinstrap-install](/img/chinstrap-install.png)

## Initializing a Chinstrap project
Chinstrap provides a sub-command to initialize a new Chinstrap project. Create an empty folder and initialize the project by running `chinstrap init`.

```sh
mkdir ChinToken
cd ChinToken
chinstrap init
```

![chinstrap-init](/img/chinstrap-init.png)

## Configuring Chinstrap

Chinstrap configuration file is a yaml file, that tells chinstrap, which account and network to use for origination, which compiler to use for compilation and testing. A minimal configuration `chinstrap-config.yml` file for our `ChinToken` proejct looks like this:

```yaml
chinstrap:
  network:
    development:
      host: http://localhost:12345
      accounts:
        - privateKeyFile: ./.secret
  compiler:
    lang: smartpy
    test: smartpy
```

We create a file named .secret and paste the private key in the file. I am going to use a test private keys generated by `chinstrap sandbox` command which we will see how to use in the following sections.

```sh
‚ûú cat .secret
edsk3AiSAERPfe6yqS7Q4YAxBQ5L1NLUao2H9sP34x7u1tEkXB5bwX
```

## Contract development
We can get the FA1.2 implementation from SmartPy by running the `chinstrap tempaltes` command and selecting `Token Contracts` using the arrows.

```sh
‚ûú chinstrap templates -h

      _     _           _
  ___| |__ (_)_ __  ___| |_ _ __ __ _ _ __
 / __| '_ \| | '_ \/ __| __| '__/ _` | '_ \
| (__| | | | | | | \__ \ |_| | | (_| | |_) |
 \___|_| |_|_|_| |_|___/\__|_|  \__,_| .__/
                                     |_|

üêß Chinstrap - a cute framework for developing Tezos Smart Contracts!
usage: chinstrap templates [-h] -l {JsLIGO,PascaLIGO,CameLIGO,ReasonLIGO,SmartPy}

optional arguments:
  -h, --help            show this help message and exit
  -l {JsLIGO,PascaLIGO,CameLIGO,ReasonLIGO,SmartPy}, --language {JsLIGO,PascaLIGO,CameLIGO,ReasonLIGO,SmartPy}
                        The type of the item to create
```

![chinstrap-template](/img/chinstrap-template.png)

Now we are ready to compile the test üï∫üíÉ


## Restructure FA1.2 Contract
Wait, before we have one additional step before we area ready to start compiling and testing the contract. We move the `test` function defined in `contracts/FA1.2.py` to another file in `tests`. Let's call this test `FA1.2.test.py`

Ok, now we are ready to compile the test üï∫üíÉ

## Compile contract

Chinstrap provides a `compile` sub-command that picks the contracts from `contracts/` folder based on configured `compiler:lang` in the `chinstrap-config.yml` configuration file.

```sh
chinstrap compile
```

![chinstrap compile](/img/chinstrap-compile.png)

## Test contract

Chinstrap provides a `test` sub-command that picks up the tests from the `tests/` folder based on the configured `compiler:test` in the configuration file.

![chinstrap test](/img/chinstrap-test.png)

## Originate contract

At this point, the smart contracts are compiled and ready to be originated. We are ready to originate or deploy our smart contracts on to the configured network. We will make use of Flextesa sandbox as a local node, to test our originations. 

For a detailed explanation on how originations work with `Chinstrap`, please read the documentation available here: [Originating smart contracts with Chinstrap](https://chinstrap.io/docs/origination)

Our origination for this FA1.2 looks like this:

```py
from chinstrap.originations import getContract

def deploy(chinstrapState, network, accounts):
    contract = getContract("FA1_2")

    initial_storage = contract.storage.encode(
        {
            'administrator': accounts[0].key.public_key_hash(), 
            'balances': {}, 
            'metadata': {}, 
            'paused': False, 
            'token_metadata': {
            }, 
            'totalSupply': 0
        }
    )
    
    return initial_storage, contract

```

Let's originate on our local flextesa sandbox. 
Let's initialise the sandbox before we start running it. We can initialise the sandbox by running
```sh
chinstrap sandbox -i
```

Now, we can start the sandbox by running
```sh
chinstrap sandbox -o 12345 -c 5 -p Ithaca
```

![chinstrap sandbox](/img/chinstrap-sandbox.png)


We can finally originate now. üéâ

```sh
chinstrap originate
```

![chinstrap originate](/img/chinstrap-originate.png)


## Clean up
Once the development and testing is done, you can stop the sandbox by running:
`chinstrap sandbox -s`


## Conclusion
On origination, Chinstrap calculates and keeps track of the sha256 hash of the compiled contracts. This helps in preventing duplicate originations. If you want to re-originate the same contract, you can force chinstrap to do so using the -f` or --force flag.

The first step in developing a Dapp is to deploy the smart contracts. Chinstrap takes LIGO/SmartPy code and deploys it onto any public or private network. Each origination needs an initial storage that is compliant with the storage type of Michelson code.

Thanks to its easy configuration and readable origination files, Chinstrap is an essential tool throughout the development and deployment of a Dapp. 

In our next post, we will try to leverage `Chinstrap`'s repl to do develop, test and originate and also interact with the same FA1.2 contract we deployed in this blog. Final setup for this post can be found in this repo: [ant4g0nist/ChinToken](https://github.com/ant4g0nist/ChinToken)

Happy Hacking üëæ üéâ



